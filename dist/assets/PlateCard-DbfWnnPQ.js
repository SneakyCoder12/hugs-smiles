import{r as c,d as A,e as R,s as b,j as e,L as N,t as v}from"./index-oWMwxAaA.js";import{u as E}from"./usePlateGenerator-DBopJAml.js";import{H as y}from"./heart-80JjwrvD.js";import{P as L}from"./phone-P4D10GHF.js";import{M as F}from"./message-circle-D034qcCi.js";function M({emirate:m,code:s,number:l,price:k,plateUrl:f,comingSoon:C,sellerPhone:u,plateNumber:$,listingId:r,status:P,plateStyle:_="private"}){const n=P==="sold",d=E(m,s,l,_),[x,p]=c.useState(!1),D=A(),{user:a}=R(),[i,h]=c.useState(!1),S=$||`${s} ${l}`.trim(),o=(u==null?void 0:u.replace(/\D/g,""))||"",j=o?`https://wa.me/${o}?text=${encodeURIComponent(`Hi, I'm interested in plate ${S}`)}`:null,g=o?`tel:+${o}`:null;c.useEffect(()=>{!a||!r||(async()=>{const{data:t}=await b.from("favorites").select("id").eq("user_id",a.id).eq("listing_type","plate").eq("listing_id",r).maybeSingle();t&&h(!0)})()},[a,r]);const w=async t=>{if(t.preventDefault(),t.stopPropagation(),!a){v.error("Please log in to save favorites");return}r&&(i?(await b.from("favorites").delete().eq("user_id",a.id).eq("listing_type","plate").eq("listing_id",r),h(!1),v.success("Removed from favorites")):(await b.from("favorites").insert({user_id:a.id,listing_type:"plate",listing_id:r}),h(!0),v.success("Added to favorites")))};if(C)return e.jsxs("div",{className:"h-[260px] bg-card/50 rounded-2xl border border-border/50 flex flex-col items-center justify-center opacity-60",children:[e.jsx("div",{className:"w-[90%] mx-auto h-[120px] flex items-center justify-center",children:d?e.jsx("img",{src:d,alt:"Coming Soon",className:"w-full h-full object-contain object-center opacity-40"}):e.jsx("div",{className:"animate-pulse bg-muted rounded w-full h-full"})}),e.jsx("p",{className:"text-sm font-bold text-muted-foreground mt-4 uppercase tracking-wider",children:"Coming Soon"})]});const q=()=>{x?D(f):p(!0)};return e.jsx("div",{className:"perspective-1000 h-[260px] cursor-pointer",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),onClick:q,children:e.jsxs("div",{className:`relative w-full h-full transition-transform duration-500 ease-out transform-style-3d ${x?"rotate-y-180":""}`,children:[e.jsx("div",{className:"absolute inset-0 backface-hidden",children:e.jsxs(N,{to:f,className:`block h-full bg-card rounded-2xl border border-border hover:border-primary/30 hover:shadow-lg transition-all duration-300 group overflow-hidden ${n?"opacity-80":""}`,onClick:t=>x&&t.preventDefault(),children:[n&&e.jsx("div",{className:"sold-ribbon",children:e.jsx("span",{children:"SOLD"})}),e.jsxs("div",{className:"flex flex-col items-center justify-center h-full relative",children:[r&&e.jsx("button",{onClick:w,className:"sm:hidden absolute top-3 right-3 z-10 h-8 w-8 rounded-full bg-white/90 border border-border/60 shadow-sm flex items-center justify-center transition-all active:scale-90",title:i?"Remove from favorites":"Add to favorites",children:e.jsx(y,{className:`h-4 w-4 transition-colors ${i?"fill-red-500 text-red-500":"text-gray-400"}`})}),e.jsx("div",{className:"w-[90%] mx-auto h-[120px] flex items-center justify-center",children:d?e.jsx("img",{src:d,alt:`${m} ${s} ${l}`,className:"w-full h-full object-contain object-center group-hover:scale-105 transition-transform duration-300",style:{imageRendering:"-webkit-optimize-contrast"}}):e.jsx("div",{className:"animate-pulse bg-muted rounded w-full h-full"})}),e.jsx("div",{className:"mt-4 p-4 w-full border-t border-border/50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-wider font-bold mb-1",children:"Price"}),e.jsx("p",{className:"text-xl font-bold text-foreground font-mono tracking-tight",children:k||"Contact"})]}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-bold uppercase tracking-wider group-hover:text-primary transition-colors",children:"View →"})]})})]})]})}),e.jsx("div",{className:"absolute inset-0 backface-hidden rotate-y-180",children:e.jsxs("div",{className:`h-full bg-card rounded-2xl border border-border flex flex-col items-center justify-center px-5 py-4 overflow-hidden relative ${n?"opacity-80":""}`,children:[n&&e.jsx("div",{className:"sold-ribbon",children:e.jsx("span",{children:"SOLD"})}),e.jsxs("div",{className:"w-full flex items-center justify-between mb-1",children:[e.jsx("p",{className:"text-[10px] text-muted-foreground uppercase tracking-[0.2em] font-bold",children:"Contact Seller"}),r&&e.jsx("button",{onClick:w,className:"h-8 w-8 rounded-full bg-surface border border-border/60 flex items-center justify-center transition-all hover:scale-110 active:scale-90",title:i?"Remove from favorites":"Add to favorites",children:e.jsx(y,{className:`h-4 w-4 transition-colors ${i?"fill-red-500 text-red-500":"text-muted-foreground hover:text-red-400"}`})})]}),e.jsx("p",{className:"text-sm font-display font-bold text-foreground mb-0.5",children:"Premium Plate"}),e.jsx("p",{className:"text-[10px] text-muted-foreground font-medium mb-3",children:m}),e.jsx("div",{className:"bg-surface border border-border rounded-xl px-5 py-2.5 mb-4",children:e.jsxs("p",{className:"font-mono font-black text-foreground text-2xl tracking-wider text-center",children:[s&&e.jsx("span",{children:s}),s&&l&&e.jsx("span",{className:"mx-1.5",children:" "}),e.jsx("span",{children:l})]})}),e.jsxs("div",{className:"w-full space-y-2 mb-3",children:[g&&e.jsxs("a",{href:g,onClick:t=>t.stopPropagation(),className:"w-full flex items-center justify-center gap-2.5 bg-gradient-to-r from-emerald-600 to-emerald-500 hover:from-emerald-700 hover:to-emerald-600 text-white py-2.5 rounded-full font-bold text-sm transition-all shadow-sm hover:shadow-md",children:[e.jsx(L,{className:"h-4 w-4"})," Call Now"]}),j&&e.jsxs("a",{href:j,target:"_blank",rel:"noopener noreferrer",onClick:t=>t.stopPropagation(),className:"w-full flex items-center justify-center gap-2.5 bg-gradient-to-r from-[#25D366] to-[#20BD5A] hover:from-[#1da851] hover:to-[#189E49] text-white py-2.5 rounded-full font-bold text-sm transition-all shadow-sm hover:shadow-md",children:[e.jsx(F,{className:"h-4 w-4"})," WhatsApp"]})]}),e.jsx(N,{to:f,onClick:t=>t.stopPropagation(),className:"text-[11px] font-bold text-muted-foreground hover:text-primary transition-colors uppercase tracking-wider",children:"View Details →"}),o&&e.jsx("p",{className:"text-[10px] text-muted-foreground font-mono tracking-wide mt-2",children:o})]})})]})})}const B=c.memo(M);export{B as P};
