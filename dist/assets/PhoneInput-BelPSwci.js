import{r as d,j as t,g as $}from"./index-oWMwxAaA.js";import{P}from"./phone-P4D10GHF.js";const u=[{code:"+971",country:"UAE",flag:"ğŸ‡¦ğŸ‡ª"},{code:"+966",country:"Saudi",flag:"ğŸ‡¸ğŸ‡¦"},{code:"+968",country:"Oman",flag:"ğŸ‡´ğŸ‡²"},{code:"+973",country:"Bahrain",flag:"ğŸ‡§ğŸ‡­"},{code:"+974",country:"Qatar",flag:"ğŸ‡¶ğŸ‡¦"},{code:"+965",country:"Kuwait",flag:"ğŸ‡°ğŸ‡¼"},{code:"+44",country:"UK",flag:"ğŸ‡¬ğŸ‡§"},{code:"+1",country:"US",flag:"ğŸ‡ºğŸ‡¸"},{code:"+91",country:"India",flag:"ğŸ‡®ğŸ‡³"},{code:"+92",country:"Pakistan",flag:"ğŸ‡µğŸ‡°"}],h=["50","52","54","55","56","58"];function U(r){const o=r.replace(/\D/g,"").slice(0,9);return o.length<=2?o:o.length<=5?`${o.slice(0,2)} ${o.slice(2)}`:`${o.slice(0,2)} ${o.slice(2,5)} ${o.slice(5)}`}function C(r){return r?r.length!==9?"UAE number must be 9 digits":h.some(o=>r.startsWith(o))?null:`Must start with ${h.join(", ")}`:null}function D({value:r,onChange:o,required:b,showValidation:y=!0}){const[x,i]=d.useState(!1),f=d.useRef(null),n=u.find(e=>r.startsWith(e.code)),[s,j]=d.useState((n==null?void 0:n.code)||"+971"),g=n?r.slice(n.code.length):r.replace(/^\+\d+/,""),p=u.find(e=>e.code===s)||u[0],c=s==="+971",a=g.replace(/\D/g,""),E=c?U(a):g,m=c&&y&&a.length>0?C(a):null;d.useEffect(()=>{const e=l=>{f.current&&!f.current.contains(l.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const N=e=>{const l=e.replace(/\D/g,""),w=c?l.slice(0,9):l.slice(0,15);o(`${s}${w}`)},v=e=>{j(e),o(`${e}${a}`),i(!1)};return t.jsxs("div",{ref:f,className:"relative",children:[t.jsx(P,{className:"absolute start-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground z-10"}),t.jsxs("div",{className:"flex",children:[t.jsxs("button",{type:"button",onClick:()=>i(!x),className:"flex items-center gap-1 bg-surface border border-border rounded-s-xl px-3 py-3 text-sm text-foreground hover:bg-surface-accent transition-colors border-e-0 ps-10",children:[t.jsx("span",{children:p.flag}),t.jsx("span",{className:"font-mono text-xs",children:p.code}),t.jsx($,{className:"h-3 w-3 text-muted-foreground"})]}),t.jsx("input",{type:"tel",required:b,value:E,onChange:e=>N(e.target.value),className:`flex-1 bg-surface border border-border rounded-e-xl px-4 py-3 text-sm text-foreground focus:outline-none focus:ring-2 focus:ring-primary/30 font-mono ${m?"border-red-500 focus:ring-red-500/30":""}`,placeholder:c?"50 123 4567":"Phone number"})]}),m&&t.jsx("p",{className:"text-red-500 text-xs mt-1 font-medium",children:m}),x&&t.jsx("div",{className:"absolute top-full mt-1 start-0 z-50 bg-card border border-border rounded-xl shadow-lg overflow-hidden w-64 max-h-60 overflow-y-auto",children:u.map(e=>t.jsxs("button",{type:"button",onClick:()=>v(e.code),className:`w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-surface transition-colors ${e.code===s?"bg-primary/10 text-primary":"text-foreground"}`,children:[t.jsx("span",{children:e.flag}),t.jsx("span",{className:"font-mono",children:e.code}),t.jsx("span",{className:"text-muted-foreground text-xs",children:e.country})]},e.code))})]})}export{D as P};
