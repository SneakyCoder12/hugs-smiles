import{r as c}from"./index-oWMwxAaA.js";const H=3840,M="PlateFont",O="/fonts/GL-Nummernschild-Mtl.ttf",g={ajman:{hasCode:!0,fontHeightRatio:.18,letterSpacingRatio:.015,verticalCenter:!0,components:[{type:"code",xRatio:.09,align:"center",emboss:!0},{type:"number",xRatio:.43,align:"center",emboss:!0}]},abudhabi:{hasCode:!0,fontHeightRatio:.18,letterSpacingRatio:.02,fontFile:"/fonts/GL-Nummernschild-Mtl.ttf",baselineRatio:.5,verticalCenter:!0,components:[{type:"code",xRatio:.14,align:"center",fontSizeRatio:.12,letterSpacingRatio:1e-4,baselineOffsetRatio:-.23,emboss:!0},{type:"number",xRatio:.7,align:"center",emboss:!0,letterSpacingRatio:1e-4}]},dubai:{hasCode:!0,fontHeightRatio:.2,letterSpacingRatio:.015,fontFile:"/fonts/Rough Motion.otf",verticalCenter:!0,components:[{type:"code",letterSpacingRatio:1e-4,baselineOffsetRatio:.04,xRatio:.13,align:"center",fontSizeRatio:.12,emboss:!0},{type:"number",xRatio:.62,align:"center",emboss:!0}]},sharjah:{hasCode:!0,fontHeightRatio:.133,letterSpacingRatio:.015,baselineRatio:.7,verticalCenter:!1,components:[{type:"code",xRatio:.155,align:"center",emboss:!0},{type:"number",xRatio:.735,align:"center",emboss:!0}]},rak:{hasCode:!0,fontHeightRatio:.168,letterSpacingRatio:.015,fontFile:"/fonts/DIN-1451.ttf",verticalCenter:!0,components:[{type:"code",xRatio:.31,align:"center",emboss:!0},{type:"number",xRatio:.65,align:"center",emboss:!0}]},fujairah:{hasCode:!0,fontHeightRatio:.18,letterSpacingRatio:.015,verticalCenter:!0,components:[{type:"code",xRatio:.13,align:"center",emboss:!0},{type:"number",xRatio:.65,align:"center",emboss:!0}]},umm_al_quwain:{hasCode:!0,fontHeightRatio:.17,letterSpacingRatio:.015,fontFile:"/fonts/DIN-1451.ttf",baselineRatio:.8,verticalCenter:!1,components:[{type:"code",xRatio:.124,align:"center",emboss:!0},{type:"number",xRatio:.671,align:"center",emboss:!0}]}},_={fontHeightRatio:.28,letterSpacingRatio:.015,verticalCenter:!1,baselineRatio:.5};g.abudhabi_bike={..._,hasCode:!0,fontFile:"/fonts/GL-Nummernschild-Mtl.ttf",components:[{type:"code",xRatio:.122,yRatio:.32,align:"center",emboss:!0,fontSizeRatio:.185},{type:"number",xRatio:.5,yRatio:.9,align:"center",emboss:!0,fontSizeRatio:.35}]};g.dubai_bike={..._,hasCode:!0,fontFile:"/fonts/DIN-1451.ttf",letterSpacingRatio:.01,components:[{type:"code",xRatio:.177,yRatio:.44,align:"center",emboss:!0,fontSizeRatio:.2},{type:"number",xRatio:.64,yRatio:.815,align:"center",emboss:!0,fontSizeRatio:.2}]};g.sharjah_bike={..._,hasCode:!0,fontFile:"/fonts/DIN-1451.ttf",letterSpacingRatio:.01,components:[{type:"code",xRatio:.177,yRatio:.44,align:"center",emboss:!0,fontSizeRatio:.2},{type:"number",xRatio:.66,yRatio:.815,align:"center",emboss:!0,fontSizeRatio:.2}]};g.ajman_bike={..._,hasCode:!0,fontFile:"/fonts/DIN-1451.ttf",components:[{type:"code",xRatio:.177,yRatio:.44,align:"center",emboss:!0,fontSizeRatio:.2},{type:"number",xRatio:.64,yRatio:.815,align:"center",emboss:!0,fontSizeRatio:.2}]};g.umm_al_quwain_bike={..._,hasCode:!0,fontFile:"/fonts/DIN-1451.ttf",components:[{type:"code",xRatio:.177,yRatio:.44,align:"center",emboss:!0,fontSizeRatio:.2},{type:"number",xRatio:.62,yRatio:.815,align:"center",emboss:!0,fontSizeRatio:.2}]};g.rak_bike={..._,hasCode:!1,fontFile:"/fonts/DIN-1451.ttf",letterSpacingRatio:.01,components:[{type:"number",xRatio:.66,yRatio:.83,align:"center",emboss:!0,fontSizeRatio:.2}]};g.fujairah_bike={..._,hasCode:!0,fontFile:"/fonts/DIN-1451.ttf",letterSpacingRatio:.01,components:[{type:"code",xRatio:.177,yRatio:.44,align:"center",emboss:!0,fontSizeRatio:.2},{type:"number",xRatio:.655,yRatio:.815,align:"center",emboss:!0,fontSizeRatio:.2}]};function G(a,i="private"){const t=(a||"ajman").toLowerCase().replace(/\s+/g,"_"),s=i&&i!=="private"?`_${i}`:"",o=`${t}${s}`;return g[o]||g[t]||g.ajman}async function $({plateCode:a,plateNumber:i,blankPlateImage:t,emirate:s,plateStyle:o="private"}){if(!t||!t.width)throw new Error("Invalid blank plate image");const h=(s||"ajman").toLowerCase().replace(/\s+/g,"_"),f=o&&o!=="private"?`_${o}`:"",R=`${h}${f}`,l=g[R]||g[h]||g.ajman,r=document.createElement("canvas");r.width=H;const x=t.height/t.width;r.height=Math.round(H*x);const e=r.getContext("2d");e.drawImage(t,0,0,r.width,r.height);const m=r.width,j=r.height,u=m*l.fontHeightRatio;let d=0;l.verticalCenter?d=j/2+u*.35:d=j*(l.baselineRatio||.5);const k=l.fontWeight||"bold",y=l.fontFile||O,v=l.fontFile?`PlateFont_${h}`:M,p=new FontFace(v,`url("${y}")`,{weight:k});await p.load(),document.fonts.add(p),e.textBaseline="alphabetic";for(const n of l.components){let b="";if(n.type==="code"&&(b=(a||"").toUpperCase()),n.type==="number"&&(b=i||""),!b)continue;const S=n.fontSizeRatio?m*n.fontSizeRatio:u,A=n.letterSpacingRatio?m*n.letterSpacingRatio:m*l.letterSpacingRatio,w=m*n.xRatio;let C=d;n.yRatio!==void 0?C=j*n.yRatio:n.baselineOffsetRatio&&(C=d+j*n.baselineOffsetRatio),e.font=`${k} ${Math.round(S)}px "${v}", sans-serif`;const T=e.measureText(b).width+(b.length-1)*A;let z=w;n.align==="center"&&(z=w-T/2),n.align==="right"&&(z=w-T);let F=z;const B=Math.max(3,Math.round(S*.018)),U=Math.max(2,Math.round(S*.012));for(let N=0;N<b.length;N++){const E=b[N],K=e.measureText(E).width;n.emboss?(e.save(),e.fillStyle="rgba(0, 0, 0, 0.5)",e.fillText(E,F+B,C+B),e.restore(),e.save(),e.strokeStyle="rgba(255, 255, 255, 0.55)",e.lineWidth=U,e.lineJoin="round",e.strokeText(E,F,C),e.restore(),e.save(),e.fillStyle="#0a0a0a",e.fillText(E,F,C),e.restore()):(e.fillStyle="#000000",e.fillText(E,F,C)),F+=K+A}}return r}function W(a,i="plate.png"){const t=document.createElement("a");t.download=i,t.href=a.toDataURL("image/png",1),t.click()}const P={abudhabi:"/abudhabi-plate.png",abudhabi_bike:"/AD-B-plate.jpg",abudhabi_bike_long:"/AD-BR-plate.jpg",dubai:"/dubai-plate.png",dubai_bike:"/Dubai-B-plate.jpg",dubai_bike_long:"/Dubai-BR-plate.jpg",ajman:"/ajman-plate.png",ajman_bike:"/Ajman-B-plate.jpg",ajman_bike_long:"/Ajman-BR-plate.jpg",rak:"/rak-plate.png",rak_bike:"/RAK-B-plate.jpg",rak_bike_long:"/RAK-BR-plate.jpg",fujairah:"/fujariah-plate.png",fujairah_bike:"/FUJ-B-plate.jpg",fujairah_bike_long:"/FUJ-BRR-plate.jpg",sharjah:"/sharjah-plate.png",sharjah_bike:"/SHJ-B-plate.jpg",sharjah_bike_long:"/SHJ-BR-plate.jpg",umm_al_quwain:"/umm-al-q-plate.png",umm_al_quwain_bike:"/UAQ-B-plate.jpg",umm_al_quwain_bike_long:"/UAQ-BR-plate.jpg"},J=[{name:"Abu Dhabi",subtitle:"Capital Collection",logo:"/Abu_Dhabi-logo.png",emirateKey:"abudhabi"},{name:"Dubai",subtitle:"Premium RTA Series",logo:"/dubai-logo.png",emirateKey:"dubai"},{name:"Sharjah",subtitle:"Exclusive Series",logo:"/SHARJAH-LOGO.png",emirateKey:"sharjah"},{name:"Ajman",subtitle:"Distinctive Codes",logo:"/ajman-logo.png",emirateKey:"ajman"},{name:"Umm Al Quwain",subtitle:"Vintage Selection",logo:"/ummalquein-logo.png",emirateKey:"umm_al_quwain"},{name:"Ras Al Khaimah",subtitle:"Northern Emirates",logo:"/rak-logo.png",emirateKey:"rak"},{name:"Fujairah",subtitle:"Eastern Region Collection",logo:"/fujairah-logo.png",emirateKey:"fujairah"}],D={};let I=null;function L(){return I||(I=new Promise(a=>{const i=Object.keys(P);let t=0;i.forEach(s=>{if(D[s]){++t===i.length&&a(D);return}const o=new Image;o.onload=()=>{D[s]=o,++t===i.length&&a(D)},o.onerror=()=>{console.warn("Failed to load:",P[s]),++t===i.length&&a(D)},o.src=P[s]})}),I)}function Q(a,i,t,s="private"){const[o,h]=c.useState(null),f=c.useRef(!0);return c.useEffect(()=>{f.current=!0;let R=!1;return(async()=>{const l=await L();let r=a;s==="bike"&&(r=`${a}_bike`);const x=l[r]||l[a];if(!(!x||R))try{const e=await $({emirate:a,plateCode:i,plateNumber:t,blankPlateImage:x,plateStyle:s});R||h(e.toDataURL("image/png"))}catch(e){console.error("Plate render failed:",e)}})(),()=>{R=!0,f.current=!1}},[a,i,t,s]),o}function Y(){const[a,i]=c.useState("abudhabi"),[t,s]=c.useState("private"),[o,h]=c.useState("B"),[f,R]=c.useState("6836"),l=c.useRef(null),r=c.useRef(null),[x,e]=c.useState(!1),m=c.useCallback(async()=>{var v;const u=await L();let d=a;t==="bike"&&(d=`${a}_bike`);const k=u[d]||u[a],y=l.current;if(!(!k||!y))try{const p=await $({emirate:a,plateCode:o,plateNumber:f,blankPlateImage:k,plateStyle:t});r.current=p;const n=y.getContext("2d"),b=((v=y.parentElement)==null?void 0:v.clientWidth)||600,S=Math.min(b-40,600),A=p.height/p.width,w=Math.round(S*A);y.width=S,y.height=w,n.imageSmoothingEnabled=!0,n.imageSmoothingQuality="high",n.drawImage(p,0,0,S,w)}catch(p){console.error("Plate generation failed:",p)}},[a,o,f,t]);c.useEffect(()=>{m()},[m]),c.useEffect(()=>{const u=()=>m();return window.addEventListener("resize",u),()=>window.removeEventListener("resize",u)},[m]);const j=c.useCallback(async()=>{e(!0);try{if(r.current||await m(),r.current){const u=`UAE_Plate_${a}_${t}_${o}_${f}.png`;W(r.current,u)}}catch(u){console.error(u),alert("Download failed: "+u.message)}finally{e(!1)}},[a,o,f,t,m]);return{emirate:a,setEmirate:i,plateStyle:t,setPlateStyle:s,plateCode:o,setPlateCode:h,plateNumber:f,setPlateNumber:R,canvasRef:l,downloadPlate:j,isDownloading:x}}export{J as S,Y as a,G as g,Q as u};
