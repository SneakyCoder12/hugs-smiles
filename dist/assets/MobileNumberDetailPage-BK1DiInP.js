import{f as P,e as $,r as a,s as i,j as e,L as v,t as d}from"./index-oWMwxAaA.js";import{L as q}from"./ListWithUsBanner-CsEIA6US.js";import{A}from"./arrow-left-Do3mlcJR.js";import{H as M}from"./heart-80JjwrvD.js";import{S as U}from"./share-2-UzRCSz1M.js";import{P as F}from"./phone-P4D10GHF.js";import{M as B}from"./message-circle-D034qcCi.js";import{S as H}from"./shield-BQRpgUpd.js";import"./sparkles-BcuWLBmw.js";import"./arrow-right-KQZxj0Y2.js";function X(){const{numberId:r}=P(),{user:l}=$(),[t,w]=a.useState(null),[s,_]=a.useState(null),[S,x]=a.useState(!0),[k,L]=a.useState(null),[b,m]=a.useState(!1),[D,h]=a.useState(!1);a.useEffect(()=>{r&&(async()=>{x(!0);const{data:c,error:I}=await i.from("mobile_numbers").select("*").eq("id",r).single();if(I||!c){L("Number not found"),x(!1);return}const j=c;w(j);const{data:N}=await i.from("profiles").select("full_name, phone_number, email, created_at").eq("id",j.user_id).single();N&&_(N),x(!1)})()},[r]),a.useEffect(()=>{!l||!r||(async()=>{const{data:c}=await i.from("favorites").select("id").eq("user_id",l.id).eq("listing_type","mobile_number").eq("listing_id",r).maybeSingle();m(!!c)})()},[l,r]);const E=async()=>{if(!l){d.error("Please log in to save favorites");return}r&&(h(!0),b?(await i.from("favorites").delete().eq("user_id",l.id).eq("listing_type","mobile_number").eq("listing_id",r),m(!1),d.success("Removed from favorites")):(await i.from("favorites").insert({user_id:l.id,listing_type:"mobile_number",listing_id:r}),m(!0),d.success("Added to favorites")),h(!1))},n=((t==null?void 0:t.contact_phone)||(s==null?void 0:s.phone_number)||"").replace(/\D/g,""),g=n?`tel:+${n}`:null,p=n?`https://wa.me/${n}?text=${encodeURIComponent(`Hi, I'm interested in the number ${(t==null?void 0:t.phone_number)||""}.`)}`:null,u=(s==null?void 0:s.full_name)||(s==null?void 0:s.email)||"Seller",f=s!=null&&s.created_at?new Date(s.created_at).getFullYear().toString():"",o=(t==null?void 0:t.carrier)==="etisalat"?"Etisalat (e&)":"Du",y=(t==null?void 0:t.carrier)==="etisalat"?"/Eand_Logo.svg":"/du-logo.png",C=()=>{navigator.share?navigator.share({title:`${t==null?void 0:t.phone_number} — VIP Number`,url:window.location.href}):(navigator.clipboard.writeText(window.location.href),d.success("Link copied!"))};return S?e.jsx("div",{className:"min-h-screen bg-white pt-24 pb-16",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-40"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-10",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"bg-gray-100 rounded-2xl h-[300px]"})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"h-32 bg-gray-100 rounded-2xl"}),e.jsx("div",{className:"h-48 bg-gray-100 rounded-2xl"})]})]})]})})}):k||!t?e.jsx("div",{className:"min-h-screen bg-white pt-24 pb-16",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900 mb-4",children:"Number not found"}),e.jsx(v,{to:"/mobile-numbers",className:"text-primary font-bold hover:underline",children:"← Back to Mobile Numbers"})]})}):e.jsxs("div",{className:"min-h-screen bg-white pt-24 pb-16",children:[e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(v,{to:"/mobile-numbers",className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-500 hover:text-gray-900 transition-colors mb-8",children:[e.jsx(A,{className:"h-4 w-4"})," Back to Mobile Numbers"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-10",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-2xl p-10 flex flex-col items-center justify-center border border-gray-200 relative",children:[e.jsxs("div",{className:"absolute top-5 left-5 flex items-center gap-2",children:[e.jsx("img",{src:y,alt:o,className:"h-6 w-6 object-contain"}),e.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-widest",children:o})]}),e.jsx("button",{onClick:E,disabled:D,className:"absolute top-5 right-5 h-10 w-10 rounded-full bg-white border border-gray-200 flex items-center justify-center hover:border-red-300 hover:bg-red-50 transition-all shadow-sm disabled:opacity-50",children:e.jsx(M,{className:`h-5 w-5 transition-colors ${b?"fill-red-500 text-red-500":"text-gray-400"}`})}),e.jsx("p",{className:"text-5xl md:text-6xl font-black tracking-[0.15em] text-gray-900 font-mono mt-6",children:t.phone_number}),e.jsxs("div",{className:`mt-6 inline-flex items-center gap-2 px-4 py-2 rounded-full text-xs font-bold border ${t.carrier==="etisalat"?"bg-emerald-50 border-emerald-200 text-emerald-700":"bg-blue-50 border-blue-200 text-blue-700"}`,children:[e.jsx("img",{src:y,alt:"",className:"h-4 w-4 object-contain"}),o," • VIP Number"]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-1",children:"Carrier"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:o})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-1",children:"Listed"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:new Date(t.created_at).toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-1",children:"Type"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:"VIP"})]})]}),t.description&&e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-xl p-5 border border-gray-100",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:t.description})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-2",children:"Price"}),e.jsx("p",{className:"text-4xl font-black text-gray-900 font-mono tracking-tight",children:t.price?`AED ${t.price.toLocaleString()}`:"Contact Seller"}),e.jsxs("button",{onClick:C,className:"mt-4 flex items-center gap-2 text-sm text-gray-500 hover:text-gray-900 transition-colors",children:[e.jsx(U,{className:"h-4 w-4"})," Share this number"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-4",children:"Seller Information"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-100 border border-gray-200 flex items-center justify-center text-gray-500 font-bold text-lg",children:u.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:u}),e.jsxs("p",{className:"text-xs text-gray-400",children:[f&&`Member since ${f} · `,"UAE"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[g&&e.jsxs("a",{href:g,className:"flex items-center justify-center gap-2 w-full bg-gray-900 text-white py-3.5 rounded-xl font-bold text-sm hover:bg-gray-800 transition-all shadow-sm",children:[e.jsx(F,{className:"h-4 w-4"})," Call Seller"]}),p&&e.jsxs("a",{href:p,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-emerald-600 text-white py-3.5 rounded-xl font-bold text-sm hover:bg-emerald-700 transition-all shadow-sm",children:[e.jsx(B,{className:"h-4 w-4"})," WhatsApp"]}),!g&&!p&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"No contact info available"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsx(H,{className:"h-5 w-5 text-gray-400 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:[e.jsx("span",{className:"font-bold text-gray-700",children:"NOTICE:"})," We facilitate connections but are not liable for private transactions between buyers and sellers."]})]})]})]})]}),e.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx(q,{})})]})}export{X as default};
