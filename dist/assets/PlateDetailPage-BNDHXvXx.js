import{c as L,f as D,r as i,s as N,j as e,L as w,X as M}from"./index-oWMwxAaA.js";import{L as I}from"./ListWithUsBanner-CsEIA6US.js";import{u as U}from"./usePlateGenerator-DBopJAml.js";import{A as R}from"./arrow-left-Do3mlcJR.js";import{S as q}from"./share-2-UzRCSz1M.js";import{P as z}from"./phone-P4D10GHF.js";import{M as Y}from"./message-circle-D034qcCi.js";import{S as B}from"./shield-BQRpgUpd.js";import"./sparkles-BcuWLBmw.js";import"./arrow-right-KQZxj0Y2.js";/**
 * @license lucide-react v0.564.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],T=L("car",K),W={"Abu Dhabi":"abudhabi",Dubai:"dubai",Sharjah:"sharjah",Ajman:"ajman","Umm Al Quwain":"umm_al_quwain","Ras Al Khaimah":"rak",Fujairah:"fujairah"};function te(){var f;const{plateId:x}=D(),[a,v]=i.useState(null),[t,k]=i.useState(null),[S,m]=i.useState(!0),[C,_]=i.useState(null),[$,g]=i.useState(!1);i.useEffect(()=>{x&&(async()=>{m(!0);const{data:d,error:E}=await N.from("listings").select("*").eq("id",x).single();if(E||!d){_("Listing not found"),m(!1);return}const j=d;v(j);const{data:y}=await N.from("profiles").select("full_name, phone_number, email, created_at").eq("id",j.user_id).single();y&&k(y),m(!1)})()},[x]);const n=((f=a==null?void 0:a.plate_number)==null?void 0:f.split(" "))||[],s=n.length>1?n[0]:"",r=n.length>1?n.slice(1).join(" "):n[0]||"",P=a?W[a.emirate]||a.emirate.toLowerCase().replace(/\s+/g,"_"):"",l=(a==null?void 0:a.emirate)||"",c=U(P,s,r),o=((a==null?void 0:a.contact_phone)||(t==null?void 0:t.phone_number)||"").replace(/\D/g,""),p=o?`tel:+${o}`:null,h=o?`https://wa.me/${o}?text=${encodeURIComponent(`Hi, I'm interested in the ${l} ${s} ${r} plate.`)}`:null,b=(t==null?void 0:t.full_name)||(t==null?void 0:t.email)||"Seller",u=t!=null&&t.created_at?new Date(t.created_at).getFullYear().toString():"",A=()=>{navigator.share?navigator.share({title:`${l} ${s} ${r} — Premium Number Plate`,url:window.location.href}):navigator.clipboard.writeText(window.location.href)};return S?e.jsx("div",{className:"min-h-screen bg-white pt-24 pb-16",children:e.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-40"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-10",children:[e.jsx("div",{className:"lg:col-span-3",children:e.jsx("div",{className:"bg-gray-100 rounded-2xl h-[300px]"})}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"h-32 bg-gray-100 rounded-2xl"}),e.jsx("div",{className:"h-48 bg-gray-100 rounded-2xl"})]})]})]})})}):C||!a?e.jsx("div",{className:"min-h-screen bg-white pt-24 pb-16",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[e.jsx("p",{className:"text-xl font-bold text-gray-900 mb-4",children:"Listing not found"}),e.jsx(w,{to:"/marketplace",className:"text-primary font-bold hover:underline",children:"← Back to Marketplace"})]})}):e.jsx("div",{className:"min-h-screen bg-white pt-24 pb-16",children:e.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(w,{to:"/marketplace",className:"inline-flex items-center gap-2 text-sm font-semibold text-gray-500 hover:text-gray-900 transition-colors mb-8",children:[e.jsx(R,{className:"h-4 w-4"})," Back to Marketplace"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-10",children:[e.jsxs("div",{className:"lg:col-span-3",children:[e.jsx("div",{className:"bg-gray-50 rounded-2xl p-8 flex items-center justify-center border border-gray-100",children:c?e.jsx("img",{src:c,alt:`${l} ${s} ${r}`,className:"w-full max-w-[600px] h-auto object-contain",style:{imageRendering:"-webkit-optimize-contrast"}}):e.jsx("div",{className:"animate-pulse bg-gray-200 rounded w-full h-[200px]"})}),c&&e.jsxs("button",{onClick:()=>g(!0),className:"mt-4 w-full flex items-center justify-center gap-2 py-3.5 rounded-xl border border-gray-200 bg-white text-gray-800 font-bold text-sm hover:bg-gray-50 hover:border-gray-300 hover:shadow-md transition-all duration-200 group",children:[e.jsx(T,{className:"h-5 w-5 text-gray-500 group-hover:text-gray-800 transition-colors"}),"View on Car"]}),$&&c&&e.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",onClick:()=>g(!1),children:[e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm"}),e.jsxs("div",{className:"relative w-full max-w-4xl",onClick:d=>d.stopPropagation(),children:[e.jsx("button",{onClick:()=>g(!1),className:"absolute top-4 right-4 z-10 h-10 w-10 rounded-full bg-black/60 border border-white/20 flex items-center justify-center text-white hover:bg-black/80 transition-all",children:e.jsx(M,{className:"h-5 w-5"})}),e.jsxs("div",{className:"relative rounded-2xl overflow-hidden shadow-2xl",children:[e.jsx("img",{src:"/Preview-Plate.png",alt:"Car Preview",className:"w-full h-auto"}),e.jsx("img",{src:c,alt:`${l} ${s} ${r} on car`,className:"absolute drop-shadow-lg",style:{width:"17%",top:"71%",left:"73%",transform:"translate(-50%, -50%) perspective(600px) rotateX(4deg) rotateY(-3deg) rotateZ(-1deg)",filter:"brightness(0.92) contrast(1.05)",imageRendering:"-webkit-optimize-contrast"}})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-white/80 text-sm font-medium",children:[l," · ",s," ",r]})})]})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-1",children:"Emirate"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:l})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-1",children:"Code"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:s||"—"})]}),e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 border border-gray-100 text-center",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-1",children:"Number"}),e.jsx("p",{className:"text-lg font-bold text-gray-900",children:r})]})]}),a.description&&e.jsxs("div",{className:"mt-6 bg-gray-50 rounded-xl p-5 border border-gray-100",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-2",children:"Description"}),e.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:a.description})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-2",children:"Price"}),e.jsx("p",{className:"text-4xl font-black text-gray-900 font-mono tracking-tight",children:a.price?`AED ${a.price.toLocaleString()}`:"Contact Seller"}),e.jsxs("button",{onClick:A,className:"mt-4 flex items-center gap-2 text-sm text-gray-500 hover:text-gray-900 transition-colors",children:[e.jsx(q,{className:"h-4 w-4"})," Share this plate"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6",children:[e.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-widest font-bold mb-4",children:"Seller Information"}),e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-100 border border-gray-200 flex items-center justify-center text-gray-500 font-bold text-lg",children:b.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-gray-900",children:b}),e.jsxs("p",{className:"text-xs text-gray-400",children:[u&&`Member since ${u} · `,"UAE"]})]})]}),e.jsxs("div",{className:"space-y-3",children:[p&&e.jsxs("a",{href:p,className:"flex items-center justify-center gap-2 w-full bg-gray-900 text-white py-3.5 rounded-xl font-bold text-sm hover:bg-gray-800 transition-all shadow-sm",children:[e.jsx(z,{className:"h-4 w-4"})," Call Seller"]}),h&&e.jsxs("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 w-full bg-emerald-600 text-white py-3.5 rounded-xl font-bold text-sm hover:bg-emerald-700 transition-all shadow-sm",children:[e.jsx(Y,{className:"h-4 w-4"})," WhatsApp"]}),!p&&!h&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"No contact info available"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 bg-gray-50 rounded-xl border border-gray-100",children:[e.jsx(B,{className:"h-5 w-5 text-gray-400 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-xs text-gray-500 leading-relaxed",children:[e.jsx("span",{className:"font-bold text-gray-700",children:"NOTICE:"})," We facilitate connections but are not liable for private transactions between buyers and sellers."]})]})]})]}),e.jsx(I,{})]})})}export{te as default};
